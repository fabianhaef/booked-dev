{#
/**
 * Booked Search Template
 */
#}
{% do view.registerAssetBundle("fabian\\booked\\assetbundles\\BookedAsset") %}
{% set settings = craft.booked.getSettings() %}
{% set bookingUrl = settings.bookingPageUrl ?: '/booking' %}

<div class="booked-search" x-data="bookingSearch({ bookingUrl: '{{ bookingUrl }}' })" :class="{ 'booked-loading': loading }">
    <div class="flex gap-4 mb-8">
        <input type="date" x-model="date" class="text-input w-48">
        <button class="btn btn-primary" @click="search()">Suchen</button>
    </div>

    <div class="booked-grid">
        <template x-for="slot in results" :key="slot.time + (slot.employeeId || '')">
            <div class="booked-card" @click="window.location.href=bookingUrl + '?date=' + date + '&time=' + slot.time + '&employeeId=' + slot.employeeId">
                <div class="font-bold text-xl mb-2" x-text="slot.time"></div>
                <div class="text-sm light" x-text="'Mitarbeiter: ' + (slot.employeeName || 'ID: ' + slot.employeeId)"></div>
                <button class="btn btn-primary btn-sm mt-4">Buchen</button>
            </div>
        </template>
        <template x-if="results.length === 0 && !loading">
            <p class="light">Keine Termine f√ºr dieses Datum gefunden.</p>
        </template>
    </div>
</div>

